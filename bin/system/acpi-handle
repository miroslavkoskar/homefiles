#!/usr/bin/env bash

set -eu

(( $# )) || exit 1

# ----------------------------------------

vt=$(</sys/class/tty/tty0/active)
export DISPLAY=":${vt##tty}"

if (( EUID )); then
    case $1 in
        button/micmute | button/f20)
            audio capture_toggle
            ;;
        button/mute)
            audio playback_toggle
            ;;
        button/screenlock)
            lock
            ;;
        button/volumedown)
            audio playback_down
            ;;
        button/volumeup)
            audio playback_up
            ;;
        ibm/hotkey)
            if [[ $2 = 'LEN0068:00' ]]; then
                xscreen -
            fi
            ;;
    esac
else
    case $1 in
        button/prog1)
            vt-activate 4
            ;;
        video/brightnessdown)
            backlight -10
            ;;
        video/brightnessup)
            backlight +10
            ;;
    esac
fi
