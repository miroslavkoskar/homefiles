#!/usr/bin/env bash

set -eu

name=()
for arg in "$@"; do
    shift
    [[ $arg = '-' ]] && break
    name+=("$arg")
done
name=${name[*]:-term}

(( ! $# )) && set -- shell

bin=${TERMBIN:-urxvt}
case $bin in
    st)
        exec $bin -c "$name" -e "$@"
        ;;
    termite)
        exec $bin --name "$name" -e "$(shell-escape "$@")"
        ;;
    urxvt | urxvtc)
        exec $bin -name "$name" -e "$@"
        ;;
    *)
        exit 2
        ;;
esac
