#!/usr/bin/env bash
#
# Simple confirmation dialog.
#
# :Copyright: (c) 2014 Miroslav Koskar <http://mkoskar.com/>
# :License: BSD 2-Clause

set -eu

prgname=${0##*/}

if (( ! $# )); then
    echo "usage: $prgname prompt [default]" >&2
    exit 2
fi

prompt=$1
default=${2-}

case $default in
    [yY])
        prompt="$prompt [Y/n]: "
        ;;
    [nN])
        prompt="$prompt [y/N]: "
        ;;
    *)
        prompt="$prompt [y/n]: "
        ;;
esac

while read -N1 -rsp "$prompt" sel; do
    sel=${sel:-$default}
    case $sel in
        [yY])
            echo y
            exit 0
            ;;
        [nN])
            echo n
            exit 1
            ;;
        *)
            echo
            ;;
    esac
done
