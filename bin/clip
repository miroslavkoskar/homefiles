#!/usr/bin/env bash

set -eu -o pipefail

prgname=${0##*/}

case $prgname in
    clipp)
        # Read from PRIMARY to CLIPBOARD.
        xclip -o | xclip -i -selection clipboard
        ;;
    clipi)
        # Read from stdin to PRIMARY and CLIPBOARD.
        xclip -i -f | xclip -i -selection clipboard
        ;;
    clipif)
        # Read from stdin to PRIMARY and CLIPBOARD (stdin -> stdout).
        xclip -i -f | xclip -i -f -selection clipboard
        ;;
    clipa)
        (( ! $# )) && exit 2
        # Read arguments to PRIMARY and CLIPBOARD.
        (IFS=$'\n'; printf '%s' "$*" | xclip -i -f | xclip -i -selection clipboard)
        ;;
    *)
        tmpfile=$(mktemp)
        trap 'rm -f "$tmpfile"' EXIT
        xselmenu "$prgname" >"$tmpfile"
        clipi <"$tmpfile"
        ;;
esac
