#!/usr/bin/env bash

set -eu

prgname=${0##*/}

_usage() {
    echo "usage: $prgname [-a] cmd"
}
usage() { _usage; exit 0; }
usage_err() { _usage; exit 2; } >&2

declare -i all=0 system=0
while getopts ash opt; do
    case $opt in
        a) all=1 ;;
        s) system=1 ;;
        h) usage ;;
        *) usage_err ;;
    esac
done
shift $((OPTIND-1))

(( $# )) || usage_err

# ----------------------------------------

if (( system )); then
    export PATH=$SYSPATH
fi

if (( all )); then
    type -Pa -- "$@"
else
    type -P -- "$@"
fi
