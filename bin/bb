#!/usr/bin/env bash

set -eu -o pipefail

prgname=${0##*/}

kernel_release=$(uname -r)
kernel_version="v${kernel_release%%-*}"

declare -A map
while read -r k v; do
    [[ $k ]] && map[$k]=$v
done <<-EOF

    !                       b https://mkoskar.com/

    ImageMagick             b /usr/share/doc/ImageMagick-6/www/command-line-tools.html
    ImageMagick-scripts     b http://www.fmwconcepts.com/imagemagick/
    angularjs               b https://docs.angularjs.org/api
    ant                     b /usr/share/doc/apache-ant/index.html
    apache                  b http://httpd.apache.org/docs/
    arch                    b https://www.archlinux.org/
    arch-bugs               b https://bugs.archlinux.org/
    arch-forums             b https://bbs.archlinux.org/search.php?action=show_new
    arch-lists              sr google site:lists.archlinux.org {}
    arch-repos              b https://git.archlinux.org/
    arch-wiki               sr archwiki {}
    argyllcms               b /usr/share/argyllcms/doc/ArgyllDoc.html
    arxiv                   sr arxiv {}
    aur                     sr aur {}
    awg                     b https://en.wikipedia.org/wiki/American_wire_gauge#Tables_of_AWG_wire_sizes
    awk                     b https://www.gnu.org/software/gawk/manual/gawk.html
    awk1                    b http://awk.freeshell.org/
    basedir                 b http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html
    bash-abs                b /usr/share/doc/bash/index.html
    bash-changes            b http://mywiki.wooledge.org/BashFAQ/061
    bash-faq                b http://mywiki.wooledge.org/BashFAQ
    bash-guide              b http://mywiki.wooledge.org/FullBashGuide
    bash-guide1             b http://guide.bash.academy/index.html
    bash-hackers            b http://wiki.bash-hackers.org/start
    bash-pitfalls           b http://mywiki.wooledge.org/BashPitfalls
    bash-sheet              b http://mywiki.wooledge.org/BashSheet
    browserbench            b http://browserbench.org/
    c-faq                   b http://c-faq.com/
    calib                   b http://www.xrite.com/online-color-test-challenge
    calib1                  b http://www.lagom.nl/lcd-test/gamma_calibration.php
    charref                 b http://dev.w3.org/html5/html-author/charref
    chrome-ext              b https://developer.chrome.com/extensions/devguide
    chrome-flags            b http://peter.sh/experiments/chromium-command-line-switches/
    chrome-manifest-app     b https://developer.chrome.com/apps/manifest
    chrome-manifest-ext     b https://developer.chrome.com/extensions/manifest
    chrome-searchcode       b https://cs.chromium.org/
    chrome-theming          b https://cs.chromium.org/chromium/src/chrome/browser/themes/browser_theme_pack.cc
    cite                    sr cite {}
    ctrlseqs                b http://invisible-island.net/xterm/ctlseqs/ctlseqs.html
    ctrlseqs1               b http://rtfm.etla.org/xterm/ctlseq.html
    d                       sr webster {}
    dbus                    b http://dbus.freedesktop.org/doc/dbus-specification.html
    dd                      sr duckduckgo {}
    dd-bang                 b https://duckduckgo.com/bang_lite.html
    dd-syntax               b https://duck.co/help/results/syntax
    deb                     sr debpackages {}
    dkim                    b http://dkimcore.org/tools/
    dns-reserved            b https://www.rfc-editor.org/rfc/rfc2606.txt
    docker                  b https://github.com/wsargent/docker-cheat-sheet
    docker-compose          b https://docs.docker.com/compose/compose-file/
    dockerfile              b https://docs.docker.com/engine/reference/builder/
    ecma                    b http://www.ecma-international.org/publications/standards/Standard.htm
    emoji                   b https://en.wikipedia.org/wiki/List_of_emoticons
    filenames               b http://www.dwheeler.com/essays/filenames-in-shell.html
    firefox-about:*         b https://developer.mozilla.org/en-US/Firefox/The_about_protocol
    firefox-about:config    b http://kb.mozillazine.org/Category:Preferences
    firefox-changes         b https://www.mozilla.org/en-US/firefox/releases/
    firefox-changes-dev     b https://developer.mozilla.org/en-US/Firefox/Releases/
    firefox-relnotes-bugs   b https://bugzilla.mozilla.org/buglist.cgi?query_format=advanced\&f1=cf_tracking_firefox_relnote\&o1=isnotempty\&f2=cf_tracking_firefox_relnote\&o2=substring\&v2={}\&limit=200\&order=changeddate\ desc
    flp                     b http://www.feynmanlectures.caltech.edu/
    freebsd                 b https://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/
    freedesktop             b http://standards.freedesktop.org/
    freedesktop-repos       b https://cgit.freedesktop.org/
    freetype                b /usr/share/doc/freetype2/documentation.html
    g                       sr google {}
    g-operators             b https://support.google.com/websearch/answer/2466433?hl=en\&ref_topic=3081620\&vid=1-635793825968278780-302114999
    gcc                     b https://gcc.gnu.org/onlinedocs/
    gg                      sr google -G {}
    gh                      sr github {}
    gh-repos                b https://github.com/mkoskar?tab=repositories
    gi                      sr google -i {}
    gimp                    b /usr/share/gimp/2.0/help/en/index.html
    gmail-nolabel           b https://mail.google.com/mail/u/0/#apps/has:nouserlabels+-in:chats+-in:inbox+-in:sent+-in:draft+-in:trash/n100
    gmail-search            b https://support.google.com/mail/answer/7190
    gnome-api               b https://developer.gnome.org/references
    gnu-make                b https://www.gnu.org/software/make/manual/make.html#Quick-Reference
    gnu-manuals             b https://www.gnu.org/manual/manual.html
    gnu-repos               b http://git.savannah.gnu.org/cgit/
    go                      b https://golang.org/ref/spec
    google-devs             b https://developers.google.com/
    google-products         b https://developers.google.com/products/
    google-search           b https://www.google.com/advanced_search
    gpg-search              b https://sks-keyservers.net/i/#extract
    gradle                  b /usr/share/java/gradle/docs/userguide/userguide.html
    gradle-dsl              b /usr/share/java/gradle/docs/dsl/index.html
    graphviz                b /usr/share/graphviz/doc
    groovy                  b /usr/share/doc/groovy-*/html/documentation/index.html
    groovy-api              b /usr/share/doc/groovy-*/html/api/overview-summary.html
    groovy-gapi             b /usr/share/doc/groovy-*/html/gapi/overview-summary.html
    grub                    b https://www.gnu.org/software/grub/manual/grub.html
    gtk-running             b https://developer.gnome.org/gtk3/stable/gtk-running.html
    guava                   b http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html
    hangouts                b https://hangouts.google.com/
    haskell-docs            b https://www.haskell.org/documentation
    haskell-libs            b /usr/share/doc/ghc/html/libraries/index.html
    haskell-search          b https://www.haskell.org/hoogle/?hoogle={}
    hibernate-orm           b http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html/
    hn                      b https://news.ycombinator.com/
    html-spec               b https://html.spec.whatwg.org/multipage/
    http                    b https://tools.ietf.org/html/rfc2616
    i                       sr ixquick {}
    ii                      sr ixquick -search=pics {}
    imdb                    sr imdb {}
    imperial                b https://en.wikipedia.org/wiki/Imperial_units
    iojs                    b https://iojs.org/api/
    irc-docs                b https://github.com/grawity/irc-docs
    irc-freenode            b http://irc.netsplit.de/channels/?net=freenode
    irc-specs               b http://ircv3.net/irc/
    iss-tracker             b http://wsn.spaceflight.esa.int/iss/
    java                    b /usr/share/doc/java/technotes/tools/unix/java.html
    java-apis               b http://www.oracle.com/technetwork/java/api-141528.html
    java-changes            b /usr/share/doc/java/technotes/guides/language/enhancements.html
    java-specs              b https://docs.oracle.com/javase/specs/index.html
    java-tutorials          b https://docs.oracle.com/javase/tutorial/reallybigindex.html
    javase                  b http://www.oracle.com/technetwork/java/javase/overview/index.html
    jdk                     b /usr/share/doc/java/index.html
    jdk-api                 b /usr/share/doc/java/api/overview-summary.html
    jdk-changes             b http://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html
    jdk-tools               b /usr/share/doc/java/technotes/tools/index.html
    jdk7                    b http://docs.oracle.com/javase/7/docs/index.html
    jdk7-api                b http://docs.oracle.com/javase/7/docs/api/overview-summary.html
    jee                     b http://www.oracle.com/technetwork/java/javaee/overview/index.html
    jee-specs               b http://www.oracle.com/technetwork/java/javaee/tech/index.html
    jee7-api                b ~/opt/java_ee_sdk-7u1/docs/api/overview-summary.html
    jee7-samples            b ~/opt/java_ee_sdk-7u1/samples/docs/list.html
    jee7-tutorial           b ~/opt/java_ee_sdk-7u1/docs/javaee-tutorial/doc/index.html
    jquery                  sr jquery {}
    js                      b https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference
    js-es6                  b http://www.ecma-international.org/ecma-262/6.0/
    js-es6-compat           b https://kangax.github.io/compat-table/es6/
    js-es6-overview         b https://github.com/lukehoban/es6features
    js-keys                 b https://w3c.github.io/uievents/tools/key-event-viewer.html
    jsr                     b ~/archive/lib/00-cs/java/08-jsr/
    jsr-all                 b https://jcp.org/en/jsr/all?sortBy=date
    latin-greek             b https://en.wikipedia.org/wiki/List_of_Greek_and_Latin_roots_in_English
    latin-phrases           b https://en.wikipedia.org/wiki/List_of_Latin_phrases
    learnyouahaskell        b http://learnyouahaskell.com/chapters
    limnoria-subst          b https://github.com/ProgVal/Limnoria/blob/master/src/ircutils.py#L797
    linux-docs              b /lib/modules/$kernel_release/build/Documentation
    linux-docs1             b https://www.kernel.org/doc/html/latest/index.html
    linux-params            b /lib/modules/$kernel_release/build/Documentation/kernel-parameters.txt
    linux-repos             b https://git.kernel.org/cgit/
    linux-specs             b http://refspecs.linuxfoundation.org/
    linux-src               b https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/?id=$kernel_version
    linux-sysctl            b /lib/modules/$kernel_release/build/Documentation/sysctl
    lists                   b http://gmane.org/find.php
    lists1                  b http://markmail.org/
    lua                     b https://www.lua.org/manual/
    m4-macros               b https://www.gnu.org/software/m4/manual/m4.html#Macro-index
    mailcap                 b https://tools.ietf.org/html/rfc1524.html
    man-pages               b http://man7.org/linux/man-pages/index.html
    material-design         b https://getmdl.io/
    maven                   b http://maven.apache.org/plugins/index.html
    maven-central           b https://search.maven.org/
    maven-jcenter           b https://bintray.com/bintray/jcenter
    maven-popular           b http://mvnrepository.com/popular
    mdn                     b https://developer.mozilla.org/en-US/search?q={}
    mime                    b https://www.iana.org/assignments/media-types/media-types.xhtml
    mongodb                 b http://docs.mongodb.org/manual/reference/
    morse-nato              b https://en.wikipedia.org/wiki/NATO_phonetic_alphabet
    mozilla-repos           b https://hg.mozilla.org/
    music                   sr musicbrainz {}
    mutt                    b /usr/share/doc/mutt/manual.html
    mutt-patterns           b file:///usr/share/doc/mutt/manual.html#patterns
    mutt-regex              b file:///usr/share/doc/mutt/manual.html#regexp
    netfilter               b http://www.netfilter.org/documentation/index.html
    netfilter-flow          b https://upload.wikimedia.org/wikipedia/commons/3/37/Netfilter-packet-flow.svg
    nodejs                  b https://nodejs.org/api/
    notes                   b ~/projects/notes/_build/html/index.html
    ntrs                    sr ntrs {}
    oracle-plsql            b https://docs.oracle.com/database/121/LNPLS/toc.htm
    oracle-sql              b https://docs.oracle.com/database/121/SQLRF/toc.htm
    pango-markup            b https://developer.gnome.org/pango/stable/PangoMarkupFormat.html
    patents                 b https://patents.google.com/
    pep                     b https://www.python.org/dev/peps/
    perf                    b http://www.brendangregg.com/perf.html
    perl                    b http://perldoc.perl.org/
    phrik                   b https://wiki.archlinux.org/index.php/Phrik
    pkg                     sr archpkg {}
    posix                   b ~/archive/lib/00-cs/unix/base-specifications-7-2013/index.html
    posix-defs              b ~/archive/lib/00-cs/unix/base-specifications-7-2013/basedefs/contents.html
    posix-env               b ~/archive/lib/00-cs/unix/base-specifications-7-2013/basedefs/V1_chap08.html
    posix-ifaces            b ~/archive/lib/00-cs/unix/base-specifications-7-2013/functions/contents.html
    posix-utils             b ~/archive/lib/00-cs/unix/base-specifications-7-2013/utilities/contents.html
    postgresql              b /usr/share/doc/postgresql/html/index.html
    privoxy                 b /usr/share/doc/privoxy/user-manual/index.html
    pygments                b http://pygments.org/docs/lexers/
    pypa                    b https://www.pypa.io/
    pypi                    b https://pypi.python.org/pypi
    python                  b /usr/share/doc/python/html/index.html
    python2                 b /usr/share/doc/python2/html/index.html
    qt                      b http://doc.qt.io/
    quotes                  b https://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html
    qutebrowser             b http://qutebrowser.org/img/cheatsheet-big.png
    realworldhaskell        b http://book.realworldhaskell.org/read/
    regex-gnu               b https://www.gnu.org/software/gnulib/manual/html_node/Regular-expression-syntaxes.html
    regex-java              b /usr/share/doc/java/api/java/util/regex/Pattern.html
    regex-js                b https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp
    regex-pcre              b /usr/share/doc/pcre/html/pcresyntax.html
    regex-posix             b ~/archive/lib/00-cs/unix/base-specifications-7-2013/basedefs/V1_chap09.html
    regex-python            b /usr/share/doc/python/html/library/re.html
    regex-python-test       b http://pythex.org/
    regex101                b https://regex101.com/
    resolutions             b https://en.wikipedia.org/wiki/List_of_common_resolutions
    rfc                     b https://www.rfc-editor.org/
    rst                     b http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html
    rst-demo                b ~/projects/lab/docutils/showcase/_build/html/index.html
    rtfm-faqs               b ftp://rtfm.mit.edu/pub/faqs/
    rtfm-usenet             b ftp://rtfm.mit.edu/pub/usenet/
    rust                    b http://doc.rust-lang.org/reference.html
    rust-api                b http://doc.rust-lang.org/std/
    scala                   b http://www.scala-lang.org/api/current/
    sed                     b https://www.gnu.org/software/sed/manual/sed.html
    shakespeare             b http://shakespeare.mit.edu/
    shell-startup           b http://blog.flowblok.id.au/static/images/shell-startup-actual.png
    spock                   b http://docs.spockframework.org/
    spring                  b http://docs.spring.io/spring/docs/current/spring-framework-reference/html/
    spring-api              b http://docs.spring.io/spring/docs/current/javadoc-api/overview-summary.html
    spring-platform         b http://docs.spring.io/platform/docs/current/reference/htmlsingle/#appendix
    sql-bnf                 b ~/archive/lib/00-cs/dbms/sql-bnf/index.html
    sqlite                  b /usr/share/doc/sqlite/docs.html
    sqlite-lang             b /usr/share/doc/sqlite/lang.html
    sysrq                   b /lib/modules/$kernel_release/build/Documentation/sysrq.txt
    systemd-changes         b https://github.com/systemd/systemd/blob/master/NEWS
    tex                     b https://ctan.org/
    tlds                    b https://www.iana.org/domains/root/db
    tmux-changes            b https://github.com/tmux/tmux/blob/master/CHANGES
    tor-specs               b https://gitweb.torproject.org/torspec.git/tree/
    tr                      sr translate -from=en -to=sk {}
    tr-de                   sr translate -from=de -to=sk {}
    tweets                  b https://tweetdeck.twitter.com/
    types-eth               b /etc/ethertypes
    types-ip                b /etc/protocols
    types-ports             b /etc/services
    ud                      sr urban {}
    uefi-specs              b http://uefi.org/specifications
    unicode                 b https://en.wikipedia.org/wiki/Plane_\(Unicode\)
    unicode-charts          b http://unicode.org/charts/
    unicode-convert         b https://r12a.github.io/apps/conversion/
    unicode-emoji           b http://www.unicode.org/emoji/charts/full-emoji-list.html
    unicode-fonts           b http://www.unicode.org/resources/fonts.html
    unicode-fonts1          b http://www.wazu.jp/
    unicode-gallery         b http://xahlee.info/comp/unicode_index.html
    unicode-table           b http://unicode-table.com/
    unix-history            b https://upload.wikimedia.org/wikipedia/commons/c/cd/Unix_timeline.en.svg
    unix-history1           b https://upload.wikimedia.org/wikipedia/commons/7/77/Unix_history-simple.svg
    usb-connectors          b https://en.wikipedia.org/wiki/USB#Host_and_device_interface_receptacles
    util-linux              b https://git.kernel.org/cgit/utils/util-linux/util-linux.git/tree
    w                       sr wikipedia {}
    weechat                 b https://weechat.org/files/doc/stable/weechat_user.en.html
    weechat-api             b https://weechat.org/files/doc/stable/weechat_plugin_api.en.html
    weechat-changes         b https://github.com/weechat/weechat/blob/master/ChangeLog.adoc
    xlib-translations       b http://menehune.opt.wfu.edu/Kokua/Irix_6.5.21_doc_cd/usr/share/Insight/library/SGI_bookshelves/SGI_Developer/books/XLib_WinSys/sgi_html/ch08.html
    xmonad                  b /usr/share/doc/xmonad/html/index.html
    yaml                    b http://yaml.org/refcard.html
    yt                      sr youtube {}
    zsh                     b /usr/share/doc/zsh/html/index.html

    bbc-news                playx http://tvcatchup.com/watch/bbcnews
    bbc-red                 playx http://tvcatchup.com/watch/bbcredbutton
    bbc1                    playx http://tvcatchup.com/watch/bbcone
    bbc2                    playx http://tvcatchup.com/watch/bbctwo
    bbc4                    playx http://tvcatchup.com/watch/bbcfour
    channel4                playx http://tvcatchup.com/watch/channel4
    channel5                playx http://tvcatchup.com/watch/five
    iss-hd                  playx http://www.ustream.tv/channel/iss-hdev-payload
    itv                     playx http://tvcatchup.com/watch/itv
    nasatv                  playx http://www.ustream.tv/nasahdtv
    rtvs1                   playx http://www.rtvs.sk/televizia/live-1
    rtvs2                   playx http://www.rtvs.sk/televizia/live-2
    viva                    playx http://tvcatchup.com/watch/viva

    fahrenheit              sr google {} fahrenheit in celsius
    foot                    sr google {} ft in m
    gallon                  sr google {} gal in l
    inch                    sr google {} in in cm
    mile                    sr google {} mi in km
    ounce                   sr google {} oz in g
    pint                    sr google {} pint in l
    pound                   sr google {} lb in kg
    yard                    sr google {} yd in m

    czk-eur                 sr google {} czk in eur
    czk-gbp                 sr google {} czk in gbp
    czk-usd                 sr google {} czk in usd
    eur-czk                 sr google {} eur in czk
    eur-gbp                 sr google {} eur in gbp
    eur-usd                 sr google {} eur in usd
    gbp-czk                 sr google {} gbp in czk
    gbp-eur                 sr google {} gbp in eur
    gbp-usd                 sr google {} gbp in usd
    usd-czk                 sr google {} usd in czk
    usd-eur                 sr google {} usd in eur
    usd-gbp                 sr google {} usd in gbp

EOF

k=${1-}
if [[ ! $k ]]; then
    tmp=$(printf '%s\n' "${!map[@]}" | sort | dmenu1 -p "$prgname")
    read -r k q <<<"$tmp"
    [[ $k ]] || exit 1
else
    q=$(dmenu1 -p "$prgname $k" </dev/null)
fi
export SURFRAW_quote_ifs='no'
eval exec "${map[$k]/\{\}/\'$q\'}"
