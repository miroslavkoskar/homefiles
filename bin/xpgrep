#!/bin/bash

set -e

if [ $# -eq 0 ]; then
    echo "usage: $(basename "$0") name"
    exit 2
fi

pids=$(pgrep -x "$1")

for i in $pids; do
    env="/proc/$i/environ"
    [ -r "$env" ] && grep -Fzxq "DISPLAY=$DISPLAY" "$env" && echo "$i"
done

exit 0
