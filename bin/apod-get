#!/usr/bin/env bash

set -eu

prgname=${0##*/}

path="${XDG_CACHE_HOME:-$HOME/.cache}/apod/latest"

case $prgname in
    apod-get)
        curl -sLf --create-dirs -z "$path" -o "$path" "$(apod)" || exit 1
        ;;
    apod-bg)
        has-cmd apod-bgset \
            && apod-bgset "$path" \
            || feh --bg-max --no-fehbg "$path"
        ;;
esac
