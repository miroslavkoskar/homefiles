#!/bin/bash

set -e

cache_home=${XDG_CACHE_HOME:-$HOME/.cache}
path="$cache_home/apod/latest"
prgname=$(basename "$0")

case $prgname in
    apod-get)
        curl -s --create-dirs -o "$path" "$(apod)"
        ;;
    apod-bg)
        command -v apod-bgset >/dev/null 2>&1 \
            && apod-bgset "$path" \
            || feh --bg-max --no-fehbg "$path"
        ;;
esac
