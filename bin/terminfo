#!/usr/bin/env bash

set -e -o pipefail

ti_reset=$(tput sgr0)

echo
echo "${ti_reset}normal"
echo "$(tput bold)bold${ti_reset}"
echo "$(tput smso)standout${ti_reset}"
echo "$(tput smul)underline${ti_reset}"
echo "$(tput sitm)italics${ti_reset}"
echo "$(tput blink)blink${ti_reset}"
echo "$(tput rev)reverse${ti_reset}"

echo $'\n--------------------------------------------------'
echo "TERM = $TERM"
echo "TERMORIG = $TERMORIG"
echo "TERMINFO = $TERMINFO"
echo "TERMINFO_DIRS = $TERMINFO_DIRS"
echo
infocmp -1 | sed -n '1,2p;/\bkbs=/p;/\bkdch1=/p;/\bsmso=/p;/\bsitm=/p'

echo $'\n--------------------------------------------------'
echo "> infocmp -A /usr/share/terminfo $TERM $TERM"
echo
infocmp -A /usr/share/terminfo "$TERM" "$TERM" || true

echo $'\n--------------------------------------------------'
stty -a | perl -n -e '/\b(erase = .*?);/ && print "stty $1\n"'

echo $'\n--------------------------------------------------'
read -N1 -rp 'Press BS:            '
echo
read -N1 -rp 'Press CTRL+BS:       '
echo
read -N1 -rp 'Press CTRL+H:        '
echo
read -N1 -rp 'Press CTRL+SHIFT+H:  '
echo
echo
