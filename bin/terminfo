#!/bin/bash

set -e

# TODO: don't use `...` process substitution

echo
echo `tput sgr0`normal
echo `tput bold`bold`tput sgr0`
echo `tput smso`standout`tput sgr0`
echo `tput smul`underline`tput sgr0`
echo `tput sitm`italics`tput sgr0`
echo `tput blink`blink`tput sgr0`
echo `tput rev`reverse`tput sgr0`

echo $'\n--------------------------------------------------'
echo "TERM = $TERM"
echo "TERMOLD = $TERMOLD"
echo "TERMINFO = $TERMINFO"
echo "TERMINFO_DIRS = $TERMINFO_DIRS"
echo
infocmp -1 | sed -n '1,2p;/\bkbs=/p;/\bkdch1=/p;/\bsmso=/p;/\bsitm=/p'

echo $'\n--------------------------------------------------'
echo "> infocmp -A /usr/share/terminfo $TERM $TERM"
echo
infocmp -A /usr/share/terminfo "$TERM" "$TERM" || true

echo $'\n--------------------------------------------------'
stty -a | perl -n -e '/\b(erase = .*?);/ && print "stty $1\n"'

echo $'\n--------------------------------------------------'
read -N1 -rp 'Press BS:            '
echo
read -N1 -rp 'Press CTRL+BS:       '
echo
read -N1 -rp 'Press CTRL+H:        '
echo
read -N1 -rp 'Press CTRL+SHIFT+H:  '
echo
echo
