#!/usr/bin/env bash

set -u

prgname=${0##*/}

if [[ $(xserverq name) = 'Xorg' ]]; then
    if [[ $prgname != 'xscreen0' ]]; then
        if [[ $prgname = 'xscreen-mobile' ]]; then
            autorandr -l mobile --force
        elif xrandr | grep -qE '^LVDS1 connected'; then
            autorandr -c -d mobile --force
        else
            autorandr -c --force
        fi
    fi
    xrandr --dpi 96
    NOOSD=1 touchpad off
    NOOSD=1 trackpoint-wheel on
fi

xset b off s off dpms 0 0 300
xsetroot -cursor_name left_ptr

type hsetroot &>/dev/null && hsetroot || xsetroot -solid black
apod-bg &

true
