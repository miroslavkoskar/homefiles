#!/usr/bin/env bash

set -u

export NOOSD=1

# shellcheck disable=SC2034
args=("$@")

xserver=$(xserverq name)
declare -i xorg=0
[[ $xserver = Xorg ]] && xorg=1

pre_hook() { :; }
post_hook() { apod set & }

src=~/bin/xscreen.$HOSTNAME
# shellcheck disable=SC1090
[[ -e $src ]] && . "$src"

pre_hook

if (( xorg )); then
    (sleep 1; backlight-auto) &
    xrandr --dpi 96
    touchpad off
    trackpoint-wheel on
fi

xset b off s off dpms 0 0 300 r rate 500 35
xsetroot -cursor_name left_ptr
hsetroot || xsetroot -solid black
numlockx on
xkb -

post_hook
true
