#!/usr/bin/env bash

set -eu

format='%s\e\\'
if [[ ${TMUX-} ]]; then
    format='\ePtmux;\e%s\a\e\\'
elif [[ ${TERM%%-*} = 'screen' ]]; then
    format='\eP%s\a\e\\'
fi

if (( ! $# )); then
    set -- "$(head -c 255)"
fi

printf "$format" "$1"
