#!/usr/bin/env bash

set -eu

prgname=${0##*/}

for i in /sys/class/power_supply/BAT${1:-*}; do
    [[ -d $i ]] || {
        echo "$prgname: cannot access $i"  >&2
        exit 1
    }
    echo $'\n--------------------------------------------------'
    echo -e "> $i:\n"
    cat -- "$i/uevent"

    batcap=$(batcap "${i##*/BAT}")
    printf '\nbatcap [%%]: %s\n' "$batcap"
done
echo
