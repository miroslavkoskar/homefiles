#!/usr/bin/env bash

set -eu

attach() {
    local sname=$1
    local wname="s_$sname"
    xdotool search --classname "$wname" >/dev/null \
        || { term -n "$wname" trun s "$sname" & }
}

s -d aux
s -d tmp
s -d wrk

attach tmp
attach wrk

# wait a bit for tmp -> aux ordering
sleep 0.5
attach aux

wait
