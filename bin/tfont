#!/usr/bin/env bash
#
# Set passed font or scroll through predefined list.

set -eu -o pipefail

process() {
    printf '\e]50;%s' "$1" | tctlseq
}

if (( ! $# )); then
    while read -rs line; do
        process "$line"
    done < <(
    scroller <<-EOF
		xft:Terminus:pixelsize=16
		xft:Terminus:pixelsize=20
		xft:Terminus:pixelsize=28
		xft:Terminus:pixelsize=32
		xft:Tamsyn:pixelsize=12
		xft:Tamsyn:pixelsize=14
		xft:Monaco:size=10
		xft:Monaco:size=11
		xft:Envy Code R:size=11
		xft:MonteCarlo:pixelsize=10
		xft:Source Code Pro:size=10
		xft:DejaVu Sans Mono:size=8
		xft:DejaVu Sans Mono:size=10
		xft:DejaVu Sans Mono:size=11
		xft:DejaVu Sans Mono:pixelsize=14
	EOF
    )
else
    process "$1"
fi
