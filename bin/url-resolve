#!/usr/bin/env bash

set -eu
shopt -s extglob

src=${1:-$(xclip -o | head -c 255)}
case $src in
    http?(s)://*)
        torify curl -sSL -w '%{url_effective}\n' -o /dev/null "$src"
        ;;
    *)
        exit 2
        ;;
esac
