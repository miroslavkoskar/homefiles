#!/usr/bin/env bash

set -eu

prgname=${0##*/}

[[ -t 1 ]] || exec >/dev/null

cleanup() {
    local retstat=$?
    if (( retstat )); then
        notify "___ $prgname FAIL ___"
    fi
}
trap cleanup EXIT

src=${1:-$(xclip -o | head -c 255)}

mpv --really-quiet --msg-level=all=error "$src" 2>/dev/null || \
    livestreamer --loglevel=error "$src" 2>/dev/null
