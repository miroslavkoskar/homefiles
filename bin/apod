#!/usr/bin/env bash

set -eu

prgname=${0##*/}

path="$HOME/.cache/apod/latest"

case ${1-} in
    get)
        url=$(apodurl)
        curl -sSLf --create-dirs -o "$path" --url "$url"
        ;;
    set)
        [[ -e $path ]] && feh --bg-max --no-fehbg "$path"
        ;;
    *)
        echo "usage: $prgname {get | set}" >&2
        exit 2
        ;;
esac
