#!/usr/bin/env bash

set -eu

maybe_cd() {
    cd "$1" >/dev/null 2>&1
}

from_git() {(
    local name=$1
    shift
    echo -e "\n> $name : $*"

    if maybe_cd "$name"; then
        git fetch --all
        if [[ $(git rev-parse --abbrev-ref HEAD) = 'local' ]]; then
            echo '> _local_ branch - not merging!'
        else
            git merge --ff-only
        fi
    else
        git clone "$@" "$name"
    fi
)}

cd ~/.vim

mkdir -p .backup .swap .undo bundle

cd bundle

from_git AnsiEsc            https://github.com/jakar/vim-AnsiEsc.git
from_git NERD_tree          https://github.com/scrooloose/nerdtree.git
from_git bufexplorer        https://github.com/vim-scripts/bufexplorer.zip.git
from_git colorschemes       https://github.com/flazz/vim-colorschemes.git
from_git ctrlp              https://github.com/ctrlpvim/ctrlp.vim.git
from_git dispatch           https://github.com/tpope/vim-dispatch.git
from_git easy_align         https://github.com/junegunn/vim-easy-align.git
from_git easymotion         https://github.com/Lokaltog/vim-easymotion.git
from_git easytags           https://github.com/xolox/vim-easytags.git
from_git emmet              https://github.com/mattn/emmet-vim.git
from_git exchange           https://github.com/tommcdo/vim-exchange.git
from_git filebeagle         https://github.com/jeetsukumaran/vim-filebeagle.git
from_git fzf                https://github.com/junegunn/fzf.vim.git
from_git gnupg              https://github.com/jamessan/vim-gnupg.git
from_git gundo              https://github.com/sjl/gundo.vim.git
from_git minibufexpl        https://github.com/vim-scripts/minibufexpl.vim.git
from_git misc               https://github.com/xolox/vim-misc.git
from_git multiple_cursors   https://github.com/terryma/vim-multiple-cursors.git
from_git neomake            https://github.com/benekastah/neomake.git
from_git pathogen           https://github.com/tpope/vim-pathogen.git
from_git repeat             https://github.com/tpope/vim-repeat.git
from_git speeddating        https://github.com/tpope/vim-speeddating.git
from_git surround           https://github.com/tpope/vim-surround.git
from_git syntastic          https://github.com/scrooloose/syntastic.git
from_git tagbar             https://github.com/majutsushi/tagbar.git
from_git tcomment           https://github.com/tomtom/tcomment_vim.git
from_git unimpaired         https://github.com/tpope/vim-unimpaired.git
from_git unite              https://github.com/Shougo/unite.vim.git
from_git visualrepeat       https://github.com/vim-scripts/visualrepeat.git

# from_git UltiSnips          https://github.com/SirVer/ultisnips.git
# from_git fugitive           https://github.com/tpope/vim-fugitive.git
# from_git snippets           https://github.com/honza/vim-snippets.git
# from_git vimoutliner        https://github.com/vimoutliner/vimoutliner.git

# https://github.com/Raimondi/delimitMate.git
# https://github.com/Shougo/neomru.vim
# https://github.com/Shougo/unite-outline.git
# https://github.com/Shougo/vimfiler.vim.git
# https://github.com/Valloric/YouCompleteMe.git
# https://github.com/Yggdroot/indentLine.git
# https://github.com/airblade/vim-gitgutter.git
# https://github.com/dahu/vimple.git
# https://github.com/davidhalter/jedi-vim.git
# https://github.com/klen/python-mode.git
# https://github.com/mhinz/vim-signify.git
# https://github.com/mhinz/vim-startify.git
# https://github.com/rking/ag.vim.git
# https://github.com/svermeulen/vim-easyclip.git
# https://github.com/thinca/vim-ref.git
# https://github.com/tpope/vim-abolish.git

# https://github.com/mattboehm/vim-accordion
# https://github.com/spolu/dwm.vim.git

echo
